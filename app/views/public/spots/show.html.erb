

<div class="container">
 <div class ="row">
   <div class="col-md-6">
     <%= image_tag @spot.image, size: "300x200" %></div>
   <div class="col-md-6">
     <p><%= @spot.spot_name %></p>
     <%= link_to @spot.spot_name.truncate(15), spot_path(@spot) %>
        <% if !@spot.favorites.exists?(customer_id: current_customer.id) %>
          <%= link_to spot_favorites_path(@spot.id), method: :post do %>
            <i class="far fa-heart like-btn" ></i>
          <% end %>
        <% else %>
          <%= link_to spot_favorites_path(@spot.id), method: :delete do %>
            <i class="fas fa-heart unlike-btn"></i>
          <% end %>
        <% end %>
        <br />

    <div id= "star"></div>
     <p><%= link_to "#{@spot.comments.count} コメント", spot_comments_path(@spot.id) %></p>
     <p><%= @spot.access %></p>
     <p><%= @spot.business_day %></p>
     <p><%= @spot.address %></p>
     <p><%= @spot.telephone_number %></p>
     <p><%= @spot.facility %></p>
     <p><%= link_to @spot.url, "#{@spot.url}" %></p>
     <%= link_to :back do %>
      <button>Back</button>
     <% end %>
   </div>
    <script>
      $(document).on('turbolinks:load', function() {
        let elem = document.querySelector('#star');
        if (elem == null) return;

        elem.innerHTML = ""
        let opt = {
          starOn: "<%= asset_path('star-on.png') %>",
          starOff: "<%= asset_path('star-off.png') %>",
          readOnly: true,
          score: "<%= @spot.comments.average(:rate) %>"
        };
        raty(elem, opt);
      });
     </script>
 </div>
</div>

